package com.clinica.cadastro.core.modelmapper;

import org.modelmapper.ModelMapper;
import org.modelmapper.TypeMap;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import com.clinica.cadastro.domain.dto.output.DoctorOutput;
import com.clinica.cadastro.domain.dto.output.MedicalAppointmentOutPut;
import com.clinica.cadastro.domain.model.Doctor;
import com.clinica.cadastro.domain.model.MedicalAppointment;

@Configuration
public class ModelMapperConfig {

	@Bean
	public ModelMapper modelMapper() {
		
		var modelMapper = new ModelMapper();
		
		TypeMap<Doctor, DoctorOutput> doctorTypeMap = modelMapper.createTypeMap(Doctor.class, DoctorOutput.class);
        
		doctorTypeMap.map(Doctor::getDoctor_name, DoctorOutput::setName);
        doctorTypeMap.map(Doctor::getDoctor_specialty, DoctorOutput::setSpecialty);

        TypeMap<MedicalAppointment, MedicalAppointmentOutPut> medicalAppointmentTypeMap = modelMapper.createTypeMap(MedicalAppointment.class, MedicalAppointmentOutput.class);
        medicalAppointmentTypeMap.addMappings(mapper -> mapper.map(MedicalAppointment::getDoctor, MedicalAppointmentOutPut::setDoctor));
		
		
		return modelMapper;
	}
}
